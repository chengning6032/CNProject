{% extends 'CZ_base.html' %}
{% load static %}

{% block title %}服務流程 - 勤築工程實業有限公司{% endblock %}

{% block extra_style %}
    /* ... 通用樣式與頁首橫幅樣式不變 ... */
    .section { padding: 80px 0; }
    .container { max-width: 1000px; }
    .page-header { background-image: linear-gradient(rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0.55)), url("{% static 'images/process-banner.jpg' %}"); background-size: cover; background-position: center; padding: 80px 0; text-align: center; color: #fff; }
    .page-header h1 { font-size: 2.8rem; margin-bottom: 10px; }
    .page-header p { font-size: 1.2rem; color: #e0e0e0; }
    .intro-text { text-align: center; max-width: 800px; margin: 0 auto 80px auto; font-size: 1.1rem; color: #555; line-height: 1.8; }

    /*
     * ===== 垂直時間軸 (Vertical Timeline) - 全新美化版 =====
    */
    .timeline-container {
        position: relative;
    }

    /* 中間的垂直線 (改為虛線) */
    .timeline-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 3px; /* 變細一點 */
        height: 100%;
        background-image: linear-gradient(to bottom, #dbeaf4 40%, transparent 0%); /* 使用漸層創建虛線效果 */
        background-size: 1px 15px; /* 線段長度與間距 */
    }

    .timeline-item {
        padding: 10px 40px;
        position: relative;
        width: 50%;
        box-sizing: border-box;
        /* 【核心新增】動畫預設狀態 */
        opacity: 0;
        transform: translateY(50px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    
    /* 【核心新增】當 is-visible class 被加上時的狀態 */
    .timeline-item.is-visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* 左右交錯佈局 */
    .timeline-item:nth-child(odd) {
        left: 0;
        padding-right: 70px;
        /* 【核心新增】動畫的初始平移方向 */
        transform: translateX(-50px);
    }
    .timeline-item:nth-child(even) {
        left: 50%;
        padding-left: 70px;
        /* 【核心新增】動畫的初始平移方向 */
        transform: translateX(50px);
    }

    .timeline-item.is-visible {
        transform: translateX(0); /* 恢復到正常位置 */
        opacity: 1;
    }


    /* 步驟內容的卡片 (增加 hover 效果) */
    .timeline-content {
        background-color: #fff;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        position: relative;
        transition: transform 0.3s ease, box-shadow 0.3s ease; /* 新增過渡效果 */
    }
    
    .timeline-content:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 86, 179, 0.1);
    }

    .step-number { color: #457b9d; font-size: 1rem; font-weight: bold; margin-bottom: 5px; }
    .timeline-content h3 { color: #1d3557; font-size: 1.5rem; margin-top: 0; margin-bottom: 10px; }
    .timeline-content p { color: #666; line-height: 1.7; }

    /* 中間的圖示 (增加陰影) */
    .timeline-icon {
        position: absolute;
        top: 20px;
        z-index: 10;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: #457b9d;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #f4f7f9;
        font-size: 1.5rem;
        box-shadow: 0 0 0 4px #457b9d;
        box-sizing: border-box; /* 【核心修正】確保邊框包含在寬度內 */
    }

    .timeline-item:nth-child(odd) .timeline-icon { right: -25px; }
    .timeline-item:nth-child(even) .timeline-icon { left: -25px; }

    /* 小箭頭樣式不變 */
    .timeline-content::before { content: ''; position: absolute; top: 28px; width: 0; height: 0; border-style: solid; }
    .timeline-item:nth-child(odd) .timeline-content::before { right: -15px; border-width: 10px 0 10px 15px; border-color: transparent transparent transparent #fff; }
    .timeline-item:nth-child(even) .timeline-content::before { left: -15px; border-width: 10px 15px 10px 0; border-color: transparent #fff transparent transparent; }
    
    /* ... CTA 與響應式設計樣式不變 ... */
    .cta-section { background-color: #1d3557; color: #fff; padding: 80px 0; text-align: center; }
    .cta-section h2 { font-size: 2.5rem; margin-bottom: 20px; }
    .cta-section p { font-size: 1.2rem; color: #e0e0e0; max-width: 600px; margin: 0 auto 30px auto; }
    .btn-primary { background-color: #fca311; color: #1d3557; padding: 15px 35px; font-size: 1.1rem; font-weight: bold; border-radius: 50px; text-decoration: none; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(252, 163, 17, 0.3); }
    .btn-primary:hover { background-color: #ffb703; transform: translateY(-5px); box-shadow: 0 8px 20px rgba(252, 163, 17, 0.4); }
    @media (max-width: 768px) {
        .timeline-container::before { left: 25px; }
        .timeline-item,
        .timeline-item:nth-child(odd),
        .timeline-item:nth-child(even) {
            width: 100%; padding-left: 70px; padding-right: 15px; left: 0;
            /* 手機版直接顯示，不加動畫 */
            opacity: 1; transform: none;
        }
        .timeline-icon { left: 0; }
        .timeline-item:nth-child(odd) .timeline-content::before,
        .timeline-item:nth-child(even) .timeline-content::before {
            left: -15px; right: auto; border-width: 10px 15px 10px 0; border-color: transparent #fff transparent transparent;
        }
    }
{% endblock %}

{% block content %}
    <!-- 頁首橫幅 -->
    <header class="page-header">
        <div class="container">
            <h1>我們的服務流程</h1>
            <!-- 【核心修改】更新文案 -->
            <p>專業、透明、以您為中心，將理想藍圖化為可行方案</p>
        </div>
    </header>

    <section class="section">
        <div class="container">
            <!-- 引言 -->
            <p class="intro-text">
                我們深信，一個成功的專案始於清晰的溝通與嚴謹的規劃。勤築工程採用一套標準化且靈活的服務流程，確保在專案的每一個階段，您都能清楚掌握進度，並與我們的專業團隊緊密協作，共同邁向成功。
            </p>

            <!-- 時間軸容器 (內容不變) -->
            <div class="timeline-container">
                <!-- 步驟一 -->
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="ri-customer-service-2-line"></i></div>
                    <div class="timeline-content">
                        <span class="step-number">STEP 01</span>
                        <h3>初步洽詢與需求分析</h3>
                        <p>旅程始於您的想法。我們將安排專業顧問與您深入對談，仔細傾聽您的需求、預算與期望。</p>
                    </div>
                </div>
                <!-- 步驟二 -->
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="ri-map-pin-line"></i></div>
                    <div class="timeline-content">
                        <span class="step-number">STEP 02</span>
                        <h3>現場勘查與可行性判斷</h3>
                        <p>我們的技術團隊將親赴現場進行初步測量與評估，並確認現場環境及專案可行性。</p>
                    </div>
                </div>
                <!-- 步驟三 -->
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="ri-draft-line"></i></div>
                    <div class="timeline-content">
                        <span class="step-number">STEP 03</span>
                        <h3>規劃構想與報價</h3>
                        <p>基於現場數據與您的需求，我們會提出初步的構想與規劃方案，並提供一份透明、詳盡的工程報價單，清楚列出所有項目與費用。</p>
                    </div>
                </div>
                <!-- 步驟四 -->
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="ri-contract-line"></i></div>
                    <div class="timeline-content">
                        <span class="step-number">STEP 04</span>
                        <h3>簽訂合約與專案啟動</h3>
                        <p>在雙方達成共識後，我們將簽訂正式的專案合約，保障您的權益。隨後，我們的專案經理將依據排程啟動專案。</p>
                    </div>
                </div>
                <!-- 步驟五 -->
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="ri-checkbox-circle-line"></i></div>
                    <div class="timeline-content">
                        <span class="step-number">STEP 05</span>
                        <h3>驗收與交付</h3>
                        <p>專案完成後，進行全面的品質驗收，確保每一個細節都符合您的需求。驗收通過後，我們將正式將專案交付給您，爾後仍繼續提供諮詢服務。</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ... 行動呼籲區塊不變 ... -->
    <section class="cta-section">
        <div class="container">
            <h2>準備好啟動您的專案了嗎？</h2>
            <p>立即與我們的專業顧問聯繫，讓我們從第一步開始，為您量身打造最佳的工程解決方案。</p>
            <a href="{% url 'CZ_contact' %}" class="btn-primary">開始第一次洽詢</a>
        </div>
    </section>

    <!-- 【核心新增】滾動動畫的 JavaScript -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const timelineItems = document.querySelectorAll('.timeline-item');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    // 可選：一旦動畫出現後就停止觀察，以節省資源
                    // observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1 // 當元素 10% 進入可視區時觸發
        });

        timelineItems.forEach(item => {
            observer.observe(item);
        });
    });
    </script>
{% endblock %}```

### **升級效果預覽**

1.  **時間軸外觀：** 中間的實心線會變成更輕盈的虛線，圖示周圍會有一圈品牌色的光暈，卡片懸停時會有更明顯的浮動效果。
2.  **滾動動畫：** 當您向下滾動頁面時，每一個步驟的卡片都會從其對應的方向（左或右）平滑地**滑入並淡入**，極大地增加了頁面的動感和專業感。
3.  **頁首文案：** 副標題已更新為 **「專業、透明、以您為中心，將理想藍圖化為可行方案」**，更精準地傳達了您公司的核心業務。

這個升級後的頁面，無論在視覺美感還是專業定位上，都將會有一個顯著的提升。