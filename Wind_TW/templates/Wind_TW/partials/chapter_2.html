{% load static %}
<div class="chapter-block">
    <h2 class="chapter-title">第二章 工址與工址地形參數</h2>

    <!-- 2.1 基本資訊 -->
    <h3 class="sub-chapter-title">2.1 基本資訊</h3>
    <table class="info-table">
        <tbody>
            <tr>
                <th style="width: 25%;">工程地點</th>
                <td>{{ site_location|default:"-" }}</td>
                <th style="width: 25%;">基本設計風速 V<sub>10</sub>(C)</th>
                <td>{{ v10c|default:"-" }} m/s</td>
            </tr>
            <tr>
                <th>地況類別 (Exposure)</th>
                <td colspan="3">地況 {{ terrain_category|default:"-" }}</td>
            </tr>
        </tbody>
    </table>

    <!-- 2.2 地況參數 -->
    <h3 class="sub-chapter-title">2.2 地況參數 (依據規範表 2.2)</h3>
    <table class="data-table" style="margin-bottom: 20px;">
        <thead>
            <tr>
                <th style="width: 14%;">α</th>
                <th style="width: 14%;">z<sub>g</sub> (m)</th>
                <th style="width: 14%;">z<sub>min</sub> (m)</th>
                <th style="width: 14%;">b</th>
                <th style="width: 14%;">c</th>
                <th style="width: 14%;">λ (m)</th>
                <th style="width: 16%;">ε̄</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ terrain_params.alpha }}</td>
                <td>{{ terrain_params.zg }}</td>
                <td>{{ terrain_params.z_min }}</td>
                <td>{{ terrain_params.b }}</td>
                <td>{{ terrain_params.c }}</td>
                <td>{{ terrain_params.l_lambda }}</td>
                <td>{{ terrain_params.epsilon_bar }}</td>
            </tr>
        </tbody>
    </table>

    <!-- 2.3 地形效應分析 -->
    <h3 class="sub-chapter-title">2.3 地形效應分析 (依據規範 2.6 節)</h3>
    <table class="data-table sub-table-topo">
        <thead>
            <tr>
                <th rowspan="2" style="width: 40%; vertical-align: middle; background-color: #f1f3f5; text-align: left; padding-left: 15px;">項目</th>
                <th style="width: 30%; background-color: #e9ecef;">±X 風向</th>
                <th style="width: 30%; background-color: #e9ecef;">±Y 風向</th>
            </tr>
            <tr>
                <th class="sub-header" style="color: #1d3557;">{{ topo_x_data.type_display|default:"未考量特殊地形" }}</th>
                <th class="sub-header" style="color: #1d3557;">{{ topo_y_data.type_display|default:"未考量特殊地形" }}</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align: left; padding-left: 15px;">地形高度 H (m)</td>
                <td>{{ topo_x_data.H|floatformat:2 }}</td>
                <td>{{ topo_y_data.H|floatformat:2 }}</td>
            </tr>
            <tr>
                <td style="text-align: left; padding-left: 15px;">地形水平距離 L<sub>h</sub> (m)</td>
                <td>{{ topo_x_data.Lh|floatformat:2 }}</td>
                <td>{{ topo_y_data.Lh|floatformat:2 }}</td>
            </tr>
            <tr>
                <td style="text-align: left; padding-left: 15px;">與頂點水平距離 x (m)</td>
                <td>{{ topo_x_data.x|floatformat:2 }}</td>
                <td>{{ topo_y_data.x|floatformat:2 }}</td>
            </tr>
            <tr>
                <td style="text-align: left; padding-left: 15px;">H / L<sub>h</sub></td>
                <td>{{ topo_x_data.H_Lh }}</td>
                <td>{{ topo_y_data.H_Lh }}</td>
            </tr>
            <tr>
                <td style="text-align: left; padding-left: 15px;">x / L<sub>h</sub> (+風向 / -風向)</td>
                <td>{{ topo_x_data.x_Lh_pair }}</td>
                <td>{{ topo_y_data.x_Lh_pair }}</td>
            </tr>
            <tr>
                <td style="text-align: left; padding-left: 15px;">z / L<sub>h</sub> (最大值, z=h)</td>
                <td>{{ topo_x_data.z_Lh_max }}</td>
                <td>{{ topo_y_data.z_Lh_max }}</td>
            </tr>
            <tr>
                <td style="text-align: left; padding-left: 15px;">K<sub>1</sub></td>
                <td>{{ topo_x_data.K1|floatformat:3 }}</td>
                <td>{{ topo_y_data.K1|floatformat:3 }}</td>
            </tr>
            <tr>
                <td style="text-align: left; padding-left: 15px;">K<sub>2</sub> (+風向 / -風向)</td>
                <td>{{ topo_x_data.K2_pair }}</td>
                <td>{{ topo_y_data.K2_pair }}</td>
            </tr>
            <tr>
                <td style="text-align: left; padding-left: 15px;">K<sub>3</sub> (最大值)</td>
                <td>{{ topo_x_data.K3_max|floatformat:3 }}</td>
                <td>{{ topo_y_data.K3_max|floatformat:3 }}</td>
            </tr>
            <tr style="background-color: #fff3cd; border-top: 2px solid #dee2e6;">
                <td style="text-align: left; padding-left: 15px; font-weight: bold;">K<sub>zt</sub> (最大值) (+風向 / -風向)</td>
                <td style="color: #c0392b; font-weight: 900; font-size: 1.1em;">{{ topo_x_data.Kzt_pair }}</td>
                <td style="color: #c0392b; font-weight: 900; font-size: 1.1em;">{{ topo_y_data.Kzt_pair }}</td>
            </tr>
        </tbody>
    </table>
    <!-- 圖片已移至第二頁，此處不顯示 -->
</div>